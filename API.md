# éœ€æ±‚ä¸å¾…å¼€å‘åŠŸèƒ½

## FE

- [x] groupä¸ºadminç‰¹æ®Šæ˜¾ç¤ºï¼Œè¯„è®ºæ¥å£å·²è¿”å›groupä¿¡æ¯
- [x] è¯„è®ºæ¥¼ä¸­æ¥¼
- [x] è”åˆæœç´¢ï¼Œå½“æœ¬åœ°æ•°æ®åº“æœç´¢ä¸åˆ°æ•°æ®æ—¶ï¼Œä¼šè¿”å›extraå­—æ®µ
- [x] æœ€æ–°è¯„è®º
- [x] å…¬å‘Š
- [x] æœ€æ–°æ›´æ–°èµ„æº
- [x] APIå˜æ›´ï¼šç™»å½•æ—¶éœ€è¦éªŒè¯ç 
- [x] APIå˜æ›´ï¼šlike APIå˜æ›´ PATCH `/api/user/` --> PATCH `/api/like/`
- [x] åˆ é™¤è¯„è®ºï¼ˆadmin onlyï¼‰
- [x] ME:æœç´¢APIè¿”å›å˜æ›´ï¼šç›®å‰åŒ…å«äº†è¯„è®ºçš„ç»“æœï¼Œä½¿ç”¨ `type`åŒºåˆ†
- [ ] æœç´¢é¡µé¢ï¼Œé€šè¿‡è¯„è®ºIDï¼Œåªæ˜¾ç¤ºè¯¥è¯„è®º
- [ ] **ç‹¬ç«‹å…¬å‘Šå’Œæœ€è¿‘æ›´æ–°åˆ°æ–°çš„é¡µé¢**
- [ ] **å¯¹è¯„è®ºçš„ååº”**
- [ ] **åˆ†ç±»**
- [ ] æ·»åŠ ä¸‹è½½åœ°å€åˆ°å·²æœ‰èµ„æº
- [ ] æ–°å¢èµ„æº
- [ ] åˆ é™¤èµ„æºã€åˆ é™¤å·²æœ‰èµ„æºçš„ä¸‹è½½
- [ ] æ›´æ”¹ç”¨æˆ·ä¿¡æ¯ï¼ˆæ·»åŠ é‚®ç®±ï¼‰
- [ ] è¯„è®ºé€šçŸ¥ï¼ˆæµè§ˆå™¨é€šçŸ¥ï¼Œæš‚æ—¶éšè—äº†ï¼‰

# BE

- [x] è”åˆæœç´¢ï¼šå­—å¹•ä¾ ã€newå­—å¹•ç»„ã€è¿½æ–°ç•ª
- [x] grafanaé¢æ¿
- [x] è±†ç“£æ¥å£
- [x] è¯„è®ºé€šçŸ¥ï¼šç«™å†…é€šçŸ¥
- [x] æ·»åŠ é‚®ç®±
- [x] é‚®ä»¶é€šçŸ¥
- [x] æ·»åŠ ä¸‹è½½åœ°å€åˆ°å·²æœ‰èµ„æº
- [x] åˆ é™¤èµ„æº
- [x] æ–°å»ºèµ„æº
- [ ] æ‰¾å›å¯†ç 

# èµ„æº

## è·å–æŒ‡å®šidçš„èµ„æº

* GET `/api/resource?id=10004`
  æ•°æ®ç»“æ„å‚è€ƒ [sample.json](yyetsweb/templates/js/sample.json)

**å¯¹äºéå®˜æ–¹ã€ç”±ç”¨æˆ·æäº¤çš„ä¸‹è½½ï¼Œä¸ `files` `dateline` åŒçº§ä¼šæœ‰ä¸€ä¸ª `creator` ç”¨äºæ ‡æ˜æ˜¯è°åˆ›å»ºçš„**
**å¯¹äºéå®˜æ–¹ã€ç”±ç”¨æˆ·æäº¤çš„èµ„æºï¼Œä¸ `cnname` `enname` åŒçº§ä¼šæœ‰ä¸€ä¸ª `creator` ç”¨äºæ ‡æ˜æ˜¯è°åˆ›å»ºçš„**

å¦‚æœæ²¡æœ‰ï¼Œé‚£ä¹ˆå°±æ˜¯å®˜æ–¹èµ„æº

## æœç´¢

åŒæ—¶æœç´¢èµ„æºå’Œè¯„è®ºï¼Œä¼šä»¥typeå­—æ®µåŒºåˆ†ï¼Œè¯„è®ºä¼šé¢å¤–è¿”å› `comment_id`

* GET `/api/resource?keyword=æƒåŠ›çš„æ¸¸æˆ`

```json
{
  "data": [
    {
      "id": 10733,
      "cnname": "æƒåŠ›çš„æ¸¸æˆ",
      "enname": "Game of Thrones",
      "aliasname": "å†°ä¸ç«ä¹‹æ­Œ / æƒåŠ›çš„æ¸¸æˆä¸‹è½½ / æƒåˆ©çš„æ¸¸æˆ / å†°ç«",
      "channel": "tv",
      "channel_cn": "ç¾å‰§",
      "area": "ç¾å›½",
      "show_type": "",
      "expire": "1610372082",
      "views": 8691,
      "year": [
        2011
      ],
      "origin": "yyets"
    }
  ],
  "extra": [],
  "comment": [
    {
      "username": "Liyixin",
      "date": "2021-10-30 10:06:44",
      "comment": "æˆ‘ç”¨é˜¿é‡Œäº‘ç›˜åˆ†äº«äº†ã€ŒæƒåŠ›çš„æ¸¸æˆ.1-8å­£æ— åˆ å‡ç‰ˆ(1).1080Pã€ï¼Œä½ å¯ä»¥ä¸é™é€Ÿä¸‹è½½ğŸš€\nå¤åˆ¶è¿™æ®µå†…å®¹æ‰“å¼€ã€Œé˜¿é‡Œäº‘ç›˜ã€App å³å¯è·å–\né“¾æ¥ï¼šhttps://www.aliyundrive.com/s/hcUfFYnkhN5",
      "commentID": "617ca8b470a52cc3ef2b0dff",
      "resourceID": 10733,
      "resourceName": "æƒåŠ›çš„æ¸¸æˆ",
      "origin": "comment"
    }
  ]
}
```

å½“æ•°æ®åº“æœç´¢ä¸åˆ°èµ„æºæ—¶ï¼Œä¼šå°è¯•ä»å­—å¹•ä¾ ã€newå­—å¹•ç»„å’Œè¿½æ–°ç•ªæœç´¢ï¼Œè¿”å›å¦‚ä¸‹

```json
{
  "data": [],
  "extra": [
    {
      "url": "https://www.zimuxia.cn/portfolio/%e4%b8%9c%e5%9f%8e%e6%a2%a6%e9%ad%87",
      "name": "ä¸œåŸæ¢¦é­‡",
      "class": "ZimuxiaOnline"
    },
    {
      "url": "https://www.zimuxia.cn/portfolio/%e9%bb%91%e8%89%b2%e6%ad%a2%e8%a1%80%e9%92%b3",
      "name": "é»‘è‰²æ­¢è¡€é’³",
      "class": "ZimuxiaOnline"
    }
  ]
}
```

## æ·»åŠ ä¸‹è½½åœ°å€åˆ°å·²æœ‰èµ„æº

æ¯”å¦‚æ›´æ–°S01E05

* PATCH `http://127.0.0.1:8888/api/resource`

```json
{
  "resource_id": 39894,
  "season_num": "1ï¼Œå¯¹äºç”µå½±çºªå½•ç‰‡ç­‰ï¼Œåº”è¯¥æ˜¯0æˆ–è€…101",
  "items": {
    "MP4": [
      {
        "episode": "12",
        "name": "ç¬¬äº”é›†.mp4",
        "size": "9.43GB",
        "dateline": "1628399290 å•ä½ç§’",
        "files": [
          {
            "way": "1",
            "way_cn": "ç”µé©´",
            "address": "ed2k://|filszpwzec5|/",
            "passwd": ""
          },
          {
            "way": "2",
            "way_cn": "ç£åŠ›",
            "address": "magnet:37",
            "passwd": ""
          }
        ]
      }
    ]
  },
  "formats": [
    "MP4"
  ]
}
```

è¿”å›201

## åˆ›å»ºæ–°èµ„æº

ä»…ç™»å½•ç”¨æˆ·å¯ç”¨ï¼Œç”¨äºåˆ›å»ºæ–°çš„èµ„æºï¼Œä¸åŒ…æ‹¬ `data.list`ã€‚

* POST `http://127.0.0.1:8888/api/resource`

```json
{
  "status": 1,
  "info": "OK",
  "data": {
    "info": {
      "id": "è®¾ç½®æˆä»»æ„å€¼å³å¯",
      "cnname": "ä¸­æ–‡å",
      "enname": "è‹±æ–‡å",
      "aliasname": "åˆ«å",
      "channel": "movie/tv",
      "channel_cn": "ç”µå½±/ç¾å‰§",
      "area": "æ³•å›½",
      "show_type": "",
      "expire": "1610401225",
      "views": 0
    },
    "list": [
    ]
  }
}
```

è¿”å›

```json
{
  "status": true,
  "message": "success",
  "id": 50623
}
```

## åˆ é™¤èµ„æº

ä»…ç®¡ç†å‘˜å¯ç”¨ï¼Œåˆ†æˆä¸¤ç§æƒ…å†µï¼Œä¸€ç§æ˜¯åˆ é™¤æŸä¸ªidå…¨éƒ¨èµ„æºï¼Œå¦‚39894ï¼›å¦å¤–ä¸€ç§æ˜¯åˆ é™¤è¿™ä¸ªèµ„æºä¸‹çš„æŸé›†ä¸‹è½½

* POST `http://127.0.0.1:8888/api/resource`

å‡è¿”å› 202

### åˆ é™¤å…¨éƒ¨

```json
{
  "resource_id": 39894
}
```

### åˆ é™¤éƒ¨åˆ†èµ„æº

ä¼šå°½å¯èƒ½çš„åŒ¹é…å¹¶åˆ é™¤å¯¹åº”çš„è¡Œ

```json
{
  "resource_id": 39894,
  "meta": {
    "episode": "1",
    "name": "è¶…235678-213.mp4",
    "size": "1.43GB",
    "dateline": "1628399290"
  }
}
```

# Top

è·å–topä¿¡æ¯ï¼Œæ¯ç±»è¿”å›15æ¡è®¿é—®é‡æœ€é«˜çš„æ•°æ®

* GET `/api/top`

```json
{
  "ALL": [
    {
      "data": {
        "info": {
          "id": 39894,
          "cnname": "é€Ÿåº¦ä¸æ¿€æƒ…9",
          "enname": "F9: The Fast Saga",
          "aliasname": "F9ç‹‚é‡æ—¶é€Ÿ(æ¸¯)/ç©å‘½å…³å¤´9(å°)/ç‹‚é‡æ—¶é€Ÿ9/é€Ÿæ¿€9/FF9/Fast & Furious 9",
          "channel": "movie",
          "channel_cn": "ç”µå½±",
          "area": "ç¾å›½",
          "show_type": "",
          "expire": "1610401946",
          "views": 47466,
          "year": [
            2021
          ]
        }
      }
    },
    {
      "data": {
        "info": {
          "id": 38413,
          "cnname": "è‡´å‘½å¥³äºº",
          "enname": "Why Women Kill",
          "aliasname": "å¥³äººä¸ºä»€ä¹ˆæ€äºº/å¥³äººä¸ºä½•æ€æˆ®",
          "channel": "tv",
          "channel_cn": "ç¾å‰§",
          "area": "ç¾å›½",
          "show_type": "",
          "expire": "1610401185",
          "views": 39040,
          "year": [
            2019
          ]
        }
      }
    }
  ],
  "US": [],
  "JP": [],
  "KR": [],
  "UK": [],
  "class": {
    "ALL": "å…¨éƒ¨",
    "US": "ç¾å›½",
    "JP": "æ—¥æœ¬",
    "KR": "éŸ©å›½",
    "UK": "è‹±å›½"
  }
}
```

# ä¸ªäººä¸­å¿ƒ

è·å–ä¸ªäººæ”¶è—

* GET `/api/like`

```json
{
  "LIKE": [
    {
      "data": {
        "info": {
          "id": 39523,
          "cnname": "ç¦å¿Œå¥³å­©",
          "enname": "à¹€à¸”à¹‡à¸à¹ƒà¸«à¸¡à¹ˆ",
          "aliasname": "æ¥è·¯ä¸æ˜çš„è½¬æ ¡ç”Ÿ/Girl from Nowhere",
          "channel": "tv",
          "channel_cn": "æ³°å‰§",
          "area": "æ³°å›½",
          "show_type": "",
          "expire": "1610401752",
          "views": 979,
          "year": [
            2020
          ]
        }
      }
    }
  ]
}
```

# ç”¨æˆ·

## ç™»å½•æˆ–æ³¨å†Œ

* POST `/api/user`ï¼Œæäº¤jsonï¼Œå­—æ®µ `username`, `password`,`captcha_id` å’Œ `captcha`

å½“éªŒè¯ç å¤±æ•ˆæ—¶ï¼Œä¼šè¿”å›303 See Other

è¿”å›json

## è·å–å½“å‰ç™»å½•ç”¨æˆ·ä¿¡æ¯

ç™»å½•ç”¨æˆ·å¯ç”¨ï¼Œæœªç™»å½•ä¼šè¿”å›401

* GET `/api/user`

```json
{
  "username": "Benny",
  "date": "2021-06-12 13:55:50",
  "ip": "172.70.122.84",
  "browser": "Mozilla/5.0 (X11; Gentoo; rv:84.0) Gecko/20100101 Firefox/84.0",
  "like": [
    31346,
    39894,
    41382
  ],
  "group": [
    "admin"
  ],
  "email": {
    "verified": false,
    "address": "123@qq.com"
  }
}
```

## æ›´æ”¹ç”¨æˆ·ä¿¡æ¯

* PATCH `http://127.0.0.1:8888/api/user`

* ç›®å‰åªæ”¯æŒä¿®æ”¹emailå­—æ®µï¼Œä¼šå‘é€éªŒè¯é‚®ä»¶ï¼Œ1800ç§’ä¹‹å†…åªèƒ½éªŒè¯ä¸€æ¬¡ï¼Œæœ‰æ•ˆæœŸ24å°æ—¶

æš‚ä¸æ”¯æŒå–æ¶ˆç»‘å®š

```json
{
  "email": "123@qq.com"
}
```

response

```json
{
  "status_code": 429,
  "status": false,
  "message": "try again in 1797s"
}
```

## éªŒè¯é‚®ä»¶

* POST `http://127.0.0.1:8888/api/user/email`

10æ¬¡é”™è¯¯ä¼šè¢«åŠ åˆ°é»‘åå•ï¼Œè´¦å·æ³¨é”€

```json
{
  "code": "83216"
}
```

response

```json
{
  "status": true,
  "status_code": 201,
  "message": "success"
}
```

# è·å–å…¨éƒ¨å‰§é›†åç§°

* GET `/api/name`
* GET `/api/name?human=1` äººç±»å¯è¯»

# æ·»åŠ æˆ–åˆ é™¤æ”¶è—

* PATCH `/api/like`ï¼Œæäº¤jsonï¼Œå­—æ®µ `resource_id`

# è¯„è®º

è¯„è®ºçš„åŸºæœ¬æ•°æ®æ ¼å¼ï¼š `children` å­—æ®µä¸º array/listï¼Œå¯å¥—å¨ƒå¦å¤–ä¸€æ¡è¯„è®ºï¼Œç›®å‰æš‚æ—¶åªæ”¯æŒä¸¤å±‚ï¼ˆä¹Ÿä¸æ‰“ç®—æ”¯æŒæ›´å¤šçš„å•¦ï¼‰ã€‚

è¯„è®ºçš„ `resource_id` å¿…é¡»ç›¸åŒ

## æ™®é€šè¯„è®º

```json
{
  "username": "Benny",
  "date": "2021-06-17 10:54:19",
  "browser": "Mozilla/5.0 (Macintosh; U; Intel Mac OS X 10.13; rv:85.1) Gecko/20100101 Firefox/85.1",
  "content": "test",
  "resource_id": 233,
  "id": "60cab95baa7f515ea291392b",
  "children": [
  ],
  "childrenCount": 0
}

```

## åµŒå¥—è¯„è®º

```json
{
  "username": "Benny",
  "date": "2021-06-17 10:54:19",
  "browser": "Mozilla/5.0 (Macintosh; U; Intel Mac OS X 10.13; rv:85.1) Gecko/20100101 Firefox/85.1",
  "content": "test",
  "resource_id": 233,
  "id": "60cab95baa7f515ea291392b",
  "children": [
    {
      "username": "Alex",
      "date": "2021-05-31 16:58:21",
      "browser": "PostmanRuntime/7.28.0",
      "content": "è¯„è®º17",
      "id": "60c838a12a5620b7e4ba5dfc",
      "resource_id": 233
    },
    {
      "username": "Paul",
      "date": "2021-05-22 16:58:21",
      "browser": "PostmanRuntime/7.28.0",
      "content": "è¯„è®º14",
      "id": "60c838a12a5620b7e4ba1111",
      "resource_id": 233
    }
  ],
  "childrenCount": 2
}

```

## è·å–è¯„è®º

* GET `/api/comment`

åˆ†é¡µï¼Œæ”¯æŒURLå‚æ•°ï¼š

* resource_id: èµ„æºidï¼Œidä¸º233æ˜¯ç•™è¨€æ¿ï¼Œidä¸º-1ä¼šè¿”å›æœ€æ–°è¯„è®º
* comment_id: æŒ‡å®šè¯¥å‚æ•°ï¼Œä¼šåªè¿”å›è¿™æ¡è¯„è®ºã€‚å¦‚æœæ˜¯å­è¯„è®ºï¼Œè¿˜ä¼šè¿å¸¦çˆ¶è¯„è®ºä¸€èµ·è¿”å›
* size: æ¯é¡µè¯„è®ºæ•°é‡ï¼Œé»˜è®¤5
* page: å½“å‰é¡µï¼Œé»˜è®¤1
* inner_size: å†…åµŒè¯„è®ºæ•°é‡ï¼Œé»˜è®¤5
* inner_page: å†…åµŒè¯„è®ºå½“å‰é¡µï¼Œé»˜è®¤1
  **æ³¨æ„ï¼šå¦‚ä¸Šä¸¤ä¸ªinnerå‚æ•°æ˜¯å¯¹æ•´ä¸ªé¡µé¢ç”Ÿæ•ˆçš„ï¼Œå¦‚è¦è¿›è¡ŒæŸä¸ªçˆ¶è¯„è®ºçš„å­è¯„è®ºåˆ†é¡µï¼Œè¯·å‚è€ƒä¸‹é¢çš„å­è¯„è®ºåˆ†é¡µæ¥å£ è¿”å› æ¥¼ä¸­æ¥¼è¯„è®ºï¼Œgroupè¡¨ç¤ºç”¨æˆ·æ‰€å±ç»„ï¼Œadminæ˜¯ç®¡ç†å‘˜ï¼Œuseræ˜¯æ™®é€šç”¨æˆ·

```json
{
  "data": [
    {
      "username": "Benny",
      "date": "2021-06-22 18:26:42",
      "browser": "PostmanRuntime/7.28.0",
      "content": "çˆ¶è¯„è®ºbenny",
      "resource_id": 233,
      "type": "parent",
      "id": "60d1bae2d87ce6e9a2934a0f",
      "group": [
        "admin"
      ]
    },
    {
      "username": "Benny",
      "date": "2021-06-22 18:24:44",
      "browser": "PostmanRuntime/7.28.0",
      "content": "çˆ¶è¯„è®ºbenny",
      "resource_id": 233,
      "type": "parent",
      "group": [
        "admin"
      ],
      "childrenCount": 22,
      "children": [
        {
          "username": "test",
          "date": "2021-06-22 18:25:12",
          "browser": "PostmanRuntime/7.28.0",
          "content": "adminå­è¯„2è®º2",
          "resource_id": 233,
          "type": "child",
          "id": "60d1ba88d87ce6e9a2934a0c",
          "group": [
            "user"
          ]
        },
        {
          "username": "admin",
          "date": "2021-06-22 18:25:08",
          "browser": "PostmanRuntime/7.28.0",
          "content": "adminå­è¯„è®º2",
          "resource_id": 233,
          "type": "child",
          "id": "60d1ba84d87ce6e9a2934a0a",
          "group": [
            "user"
          ]
        }
      ],
      "id": "60d1ba6cd87ce6e9a2934a08"
    }
  ],
  "count": 2,
  "resource_id": 233
}
```

## æœç´¢è¯„è®º

* GET `/api/comment/search`

åˆ†é¡µï¼Œæ”¯æŒURLå‚æ•°ï¼š

* size: æ¯é¡µè¯„è®ºæ•°é‡ï¼Œé»˜è®¤5
* page: å½“å‰é¡µï¼Œé»˜è®¤1
* keyword: å…³é”®å­—

è¿”å›å€¼ä¸è·å–è¯„è®ºç›¸åŒ

## å­è¯„è®ºåˆ†é¡µ

* GET `/api/comment/child`
  URLå‚æ•°ï¼š
* parent_id:çˆ¶è¯„è®ºid
* size: æ¯é¡µè¯„è®ºæ•°é‡ï¼Œé»˜è®¤5
* page: å½“å‰é¡µï¼Œé»˜è®¤1

`/api/comment/child?parent_id=60dfc932802d2c69cf8774ce&size=2&page=2`

è¿”å›å­è¯„è®º

```json
{
  "data": [
    {
      "username": "Benny",
      "date": "2021-07-03 10:22:13",
      "browser": "PostmanRuntime/7.28.1",
      "content": "å­15",
      "resource_id": 233,
      "type": "child",
      "id": "60dfc9d5802d2c69cf877514",
      "childrenCount": 17,
      "group": [
        "admin"
      ]
    },
    {
      "username": "Benny",
      "date": "2021-07-03 10:22:11",
      "browser": "PostmanRuntime/7.28.1",
      "content": "å­14",
      "resource_id": 233,
      "type": "child",
      "id": "60dfc9d3802d2c69cf877512",
      "group": [
        "admin"
      ]
    }
  ],
  "count": 17
}
```

## è·å–éªŒè¯ç 

* GET `/api/captcha?id=1234abc`ï¼Œidæ˜¯éšæœºç”Ÿæˆçš„å­—ç¬¦ä¸² API è¿”å›å­—ç¬¦ä¸²ï¼Œå½¢å¦‚ `data:image/png;base64,iVBORw0KGgoAAA....`

## æäº¤è¯„è®º

* POST `/api/comment`
  åªæœ‰ç™»å½•ç”¨æˆ·æ‰å¯ä»¥å‘è¡¨è¯„è®ºï¼Œæ£€æŸ¥cookie `username` æ˜¯å¦ä¸ºç©ºæ¥åˆ¤æ–­æ˜¯å¦ä¸ºç™»å½•ç”¨æˆ·ï¼›æœªç™»å½•ç”¨æˆ·æç¤ºâ€œè¯·ç™»å½•åå‘è¡¨è¯„è®ºâ€

`resource_id` ä»URLä¸­è·å–ï¼Œidæ˜¯ä¸Šä¸€æ­¥éªŒè¯ç çš„é‚£ä¸ªéšæœºå­—ç¬¦ä¸²idï¼Œ `captcha` æ˜¯ç”¨æˆ·è¾“å…¥çš„éªŒè¯ç 

### æäº¤æ–°è¯„è®º

åªéœ€è¦æä¾›å¦‚ä¸‹å››é¡¹ä¿¡æ¯å³å¯

```json
{
  "resource_id": 39301,
  "content": "è¯„è®ºå†…å®¹",
  "id": "1234abc",
  "captcha": "38op"
}
```

è¿”å› HTTP 201æ·»åŠ è¯„è®ºæˆåŠŸï¼Œ403/401éµå¾ªHTTPè¯­ä¹‰

```json
{
  "message": "è¯„è®ºæˆåŠŸ/è¯„è®ºå¤±è´¥/etc"
}
```

### æäº¤æ¥¼ä¸­æ¥¼è¯„è®º

è¿˜éœ€è¦é¢å¤–æä¾›ä¸€ä¸ª `comment_id`ï¼Œä¹Ÿå°±æ˜¯ UUIDï¼Œå¦‚ `60c838a12a5620b7e4ba5dfc`

```json
{
  "resource_id": 39301,
  "content": "è¯„è®ºå†…å®¹",
  "id": "1234abc",
  "captcha": "38op",
  "comment_id": "60c838a12a5620b7e4ba5dfc"
}
```

## åˆ é™¤è¯„è®ºï¼Œè½¯åˆ é™¤

* DELETE `/api/comment`ï¼Œæäº¤jsonæ•°æ®

```json
{
  "comment_id": "60cab935e9f929e09c91392a"
}
```  

ä¸ç”¨å…³å¿ƒcomment_idæ˜¯å­è¯„è®ºè¿˜æ˜¯çˆ¶è¯„è®ºï¼Œä¼šè‡ªåŠ¨åˆ é™¤

è¿”å›è¢«åˆ é™¤çš„æ•°é‡,HTTP 200è¡¨ç¤ºåˆ é™¤æˆåŠŸï¼Œ404è¡¨ç¤ºæœªæ‰¾åˆ°è¿™æ¡ç•™è¨€

```json
{
  "status_code": 404,
  "message": "",
  "count": 0
}
```

## æœ€æ–°è¯„è®º

* GET `api/comment/newest`
  page sizeå‚æ•°åŒä¸Š

```json
{
  "data": [
    {
      "username": "111",
      "date": "2021-07-11 10:22:59",
      "browser": "Mozi0.31.0",
      "content": "1111ï¼Ÿ",
      "resource_id": 233,
      "type": "parent",
      "id": "60ea53113178773",
      "group": [
        "user"
      ],
      "cnname": "ç•™è¨€æ¿"
    },
    {
      "username": "11111222",
      "date": "2021-07-10 23:54:43",
      "browser": "Mozi3322.64",
      "content": "<reply value=\"60e939be4ad7f20773865d7a\">@abcd</reply>æ€ä¹ˆä¸‹è½½å•Š\n",
      "resource_id": 37552,
      "type": "child",
      "id": "60e9c2c222111397e",
      "group": [
        "user"
      ],
      "cnname": "é»‘å¯¡å¦‡"
    },
    {
      "username": "1111",
      "date": "2021-07-10 23:41:06",
      "browser": "Moz) Chrom.864.67",
      "content": "æˆ‘æ˜¯1ç²¾å½©",
      "resource_id": 41382,
      "type": "parent",
      "id": "60e9bf924ad7f2077381111",
      "group": [
        "user"
      ],
      "cnname": "æ´›åŸº"
    }
  ],
  "count": 294
}
```

## å¯¹è¯„è®ºçš„ååº”

ä»…å¯¹ç™»å½•ç”¨æˆ·å¯ç”¨

* POST `/api/comment/reaction` æ·»åŠ ååº” 201
* DELETE `/api/comment/reaction` åˆ é™¤ååº” 202

verb ä¸ºä»»æ„å­—ç¬¦ä¸²ï¼ŒåŒ…æ‹¬emoji

```json
{
  "comment_id": "60c46d6a6d7c5dd22d69fd3bï¼Œçˆ¶è¯„è®ºå­è¯„è®ºå‡å¯",
  "verb": "ğŸ˜ğŸ‘"
}

```

è¿”å›ï¼š

* 201 æˆåŠŸæ·»åŠ ååº”
* 202 æˆåŠŸåˆ é™¤ååº”
* 404 è¯„è®ºæ²¡æ‰¾åˆ°

ç”¨æˆ·æ·»åŠ çš„ååº”ï¼Œåœ¨è¿”å›è¯„è®ºæ—¶å¯ä»¥çœ‹åˆ°ï¼Œä¼šé¢å¤–å¤šä¸€ä¸ªå­—æ®µ `reactions`ï¼Œå­è¯„è®ºåŒç†

```json
{
  "reactions": [
    {
      "verb": "ğŸ˜",
      "users": [
        "user2"
      ]
    },
    {
      "verb": "ğŸ¤”",
      "users": [
        "user3",
        "da"
      ]
    }
  ]
}
```

# metrics

## æ·»åŠ metrics

* POST `/api/metrics`, json,å­—æ®µ `type`

## è·å–metrics

* GET `/api/metrics`ï¼Œé»˜è®¤è¿”å›æœ€è¿‘7å¤©æ•°æ®ï¼Œå¯é€‰URLå‚æ•° `from`, `to`ï¼Œå¦‚ `from=2021-03-12&to=2021-03=18

# Grafana

* GET `/api/grafana/`
* GET `/api/grafana/search`
* GET `/api/grafana/query`

# é»‘åå•

* GET `/api/blacklist`

# è·å–å¤‡ä»½æ•°æ®åº“ä¿¡æ¯

* GET `/api/db_dump`

```json
{
  "yyets_mongo.gz": {
    "checksum": "b32e9d8e24c607a9f29889a926c15179d9179791",
    "date": "2021-06-14 12:59:51",
    "size": "6.0B"
  },
  "yyets_mysql.zip": {
    "checksum": "6b24ae7cb7cef42951f7e2df183f0825512029e0",
    "date": "2021-06-14 12:59:51",
    "size": "11.0B"
  },
  "yyets_sqlite.zip": {
    "checksum": "7e1659ab5cbc98b21155c3debce3015c39f1ec05",
    "date": "2021-06-14 12:59:51",
    "size": "15.0B"
  }
}
```

# å…¬å‘Š

## æ·»åŠ å…¬å‘Š

* POST `/api/announcement`, json å­—æ®µ content

## è·å–å…¬å‘Š

* GET `/api/announcement`ï¼Œæ¥å—URLå‚æ•° sizeã€page

```json
{
  "data": [
    {
      "username": "Benny",
      "date": "2021-06-15 16:28:16",
      "browser": "PostmanRuntime/7.28.0",
      "content": "hello"
    }
  ],
  "count": 1
}
```

# è±†ç“£

## è·å–ç®€ä»‹ç­‰ä¿¡æ¯

* GET `/api/douban?resource_id=34812`
  ç¬¬ä¸€æ¬¡è¯·æ±‚ä¼šæ¯”è¾ƒæ…¢

```json
{
  "name": "é€ƒé¿å¯è€»å´æœ‰ç”¨",
  "doubanId": 26816519,
  "doubanLink": "https://movie.douban.com/subject/26816519/",
  "posterLink": "https://img2.doubanio.com/view/photo/s_ratio_poster/public/p2400201631.jpg",
  "resourceId": 34812,
  "rating": "8.4",
  "actors": [
    "æ–°å£ç»“è¡£",
    "æ˜Ÿé‡æº",
    "å¤§è°·äº®å¹³",
    "è—¤äº•éš†",
    "çœŸé‡æƒ é‡Œèœ",
    "æˆç”°å‡Œ",
    "å±±è´ºç´å­",
    "å®‡æ¢¶åˆšå£«",
    "å¯Œç”°é–å­",
    "å¤ç”°æ–°å¤ª",
    "çŸ³ç”°ç™¾åˆå­",
    "ç»†ç”°å–„å½¦",
    "å¤é¦†å®½æ²»",
    "å¶å±±å¥–ä¹‹"
  ],
  "directors": [
    "é‡‘å­æ–‡çºª",
    "åœŸäº•è£•æ³°",
    "çŸ³äº•åº·æ™´"
  ],
  "genre": [
    "å–œå‰§"
  ],
  "releaseDate": "2016-10-11(æ—¥æœ¬)",
  "episodeCount": " 11",
  "episodeDuration": " 45åˆ†é’Ÿ",
  "writers": [
    "é‡æœ¨äºšçºªå­",
    "æµ·é‡çº²å¼¥"
  ],
  "year": "2016",
  "introduction": "æ£®å±±å®æ —ï¼ˆæ–°å£ç»“è¡£é¥°ï¼‰è‡ªç ”ç©¶ç”Ÿæ¯•ä¸šä¹‹åå°±ä¸€ç›´ä»•é€”ä¸é¡ºï¼Œæœ€è¿‘æ›´æ˜¯æƒ¨é­è§£é›‡ï¼Œå¤„äºâ€œæ— ä¸šæ¸¸æ°‘â€çš„çŠ¶æ€ä¹‹ä¸‹ï¼Œæ—¥å­è¿‡å¾—ååˆ†å‡„æƒ¨ã€‚ç»ç”±çˆ¶äº²çš„ä»‹ç»ï¼Œæ— å¤„å¯å»çš„å®æ —æ¥åˆ°äº†åä¸ºæ´¥å´å¹³åŒ¡ï¼ˆæ˜Ÿé‡æºé¥°ï¼‰çš„å•èº«ç”·å­å®¶ä¸­ï¼Œä¸ºå…¶æ–™ç†å®¶äº‹ï¼Œå°±è¿™æ ·ï¼ŒäºŒåäº”å²çš„å®æ —æˆä¸ºäº†ä¸€åå®¶æ”¿å¦‡ã€‚å®æ —å¿ƒåœ°å–„è‰¯æ‰‹è„šå‹¤å¿«ï¼Œåœ¨å¥¹çš„å®‰æ’å’ŒåŠ³ä½œä¸‹ï¼Œå¹³åŒ¡å®¶ä¸­çš„ä¸€åˆ‡è¢«æ‰“ç†çš„äº•äº•æœ‰æ¡ï¼Œå®æ —å› æ­¤è·å¾—äº†å¹³åŒ¡çš„ä¿¡èµ–ï¼Œäº¦æ‰¾åˆ°äº†ç”Ÿæ´»çš„é‡å¿ƒï¼Œé‡æ–°æŒ¯ä½œäº†èµ·æ¥ã€‚ç„¶è€Œå¥½æ™¯ä¸é•¿ï¼Œå®æ —çš„çˆ¶æ¯å†³å®šæ¬ç¦»æ­¤åœ°ï¼Œè¿™ä¹Ÿå°±æ„å‘³ç€å®æ —å¿…é¡»â€œç¦»èŒâ€ã€‚å®åœ¨æ— æ³•æ¥å—æ­¤äº‹çš„å®æ —å†³å®šå’Œå¹³åŒ¡â€œå¥‘çº¦ç»“å©šâ€ï¼Œåœ¨å¤–è£…åšå¤«å¦»ï¼Œåœ¨å†…ä¾æ—§æ˜¯é›‡ä¸»å’ŒèŒå‘˜ã€‚å°±è¿™æ ·ï¼Œè¿™å¯¹â€œå­¤ç”·å¯¡å¥³â€å¼€å§‹äº†ä»–ä»¬çš„åŒå±…ç”Ÿæ´»ã€‚"
}
```

## è·å–æµ·æŠ¥

* GET `api/douban?resource_id=34812&type=image`
  ä¼šè¿”å›ç›¸åº”æ ¼å¼ï¼ˆjpegã€webpã€pngç­‰ï¼‰çš„å›¾ç‰‡ï¼Œä¸ä¸Šæ¬¡æ•°æ®ä¸­ `posterLink`æ‰€çœ‹åˆ°çš„å†…å®¹ç›¸åŒ

# éªŒè¯ç 

## è·å–éªŒè¯ç 

* GET `/api/captcha?id=1234abc`ï¼Œidæ˜¯éšæœºç”Ÿæˆçš„å­—ç¬¦ä¸² API è¿”å›å­—ç¬¦ä¸²ï¼Œå½¢å¦‚ `data:image/png;base64,iVBORw0KGgoAAA....`

## æ ¡éªŒéªŒè¯ç 

é™¤å»è¯„è®ºä¸­çš„æ ¡éªŒéªŒè¯ç ï¼Œå¦‚æœ‰é¢å¤–éœ€æ±‚ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ POST æ–¹æ³•æ ¡éªŒ

* POST `/api/captcha`

```json
{
  "id": "1234abc",
  "captcha": "38op"
}
```

# è±†ç“£æŠ¥é”™

## æäº¤

* POST `/api/douban/report`

```json
{
  "captcha_id": "ç”¨æˆ·è¾“å…¥çš„éªŒè¯ç ",
  "id": "éªŒè¯ç id",
  "content": "å†…å®¹éš¾è¿‡-å’”å’”",
  "resource_id": 23133312
}
```

## æŸ¥è¯¢

* GET `/api/douban/report`

```json
{
  "data": [
    {
      "resource_id": 2333,
      "content": [
        "dddd",
        "1æ¬¾å¤§å®¶å’”å’”",
        "1æ¬¾å¤§å®¶dadadada-å’”å’”"
      ]
    },
    {
      "resource_id": 23133,
      "content": [
        "1æ¬¾å¤§å®¶dadadada-å’”å’”"
      ]
    },
    {
      "resource_id": 23133312,
      "content": [
        "1æ¬¾å¤§å®¶dadadada-å’”å’”"
      ]
    }
  ]
}
```

# é€šçŸ¥

åªæœ‰ç™»å½•ç”¨æˆ·å¯ä»¥è·å–ï¼Œåªæœ‰æ¥¼ä¸»èƒ½å¤Ÿè·å–åˆ°é€šçŸ¥ï¼Œå…¶ä»–æ¥¼å±‚çš„äººè·å–ä¸åˆ°ã€‚

## è·å–é€šçŸ¥

* GET `http://127.0.0.1:8888/api/notification`

æ”¯æŒURLå‚æ•°pageå’Œsizeï¼Œé»˜è®¤1å’Œ5ï¼Œsizeæ˜¯å·²è¯»å’Œæœªè¯»å…±äº«çš„ï¼Œä¼˜å…ˆè¿”å›æœªè¯»æ•°æ®

```json
{
  "username": "user1",
  "unread_item": [
    {
      "username": "user3",
      "date": "2021-08-14 20:23:02",
      "browser": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10.12; rv:86.1) Gecko/20100101 Firefox/86.1",
      "content": "<reply value=\"6117b2a59195e6b1ab86eb30\">@user2</reply>u3 to u2",
      "resource_id": 233,
      "type": "child",
      "id": "6117b5a6598f80ca3ebb13ed",
      "reply_to_content": "<reply value=\"610135c9d1f873388feb5c78\">@user1</reply>ajnkwa"
    },
    {
      "username": "user3",
      "date": "2021-08-14 20:22:37",
      "browser": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10.12; rv:86.1) Gecko/20100101 Firefox/86.1",
      "content": "<reply value=\"610135c9d1f873388feb5c78\">@user1</reply>u3",
      "resource_id": 233,
      "type": "child",
      "id": "6117b58dce422260bcbb13ec",
      "reply_to_content": "hello"
    }
  ],
  "read_item": [
    {
      "username": "user2",
      "date": "2021-08-14 20:10:13",
      "browser": "Mozilla/5.0 (Windows NT 6.3; WOW64; rv:86.1) Gecko/20100101 Firefox/86.1",
      "content": "<reply value=\"610135c9d1f873388feb5c78\">@user1</reply>ajnkwa",
      "resource_id": 233,
      "type": "child",
      "id": "6117b2a59195e6b1ab86eb30",
      "reply_to_content": "hello"
    }
  ],
  "unread_count": 2,
  "read_count": 1
}
```

# å·²è¯»ã€æœªè¯»æ¶ˆæ¯

* PATCH `http://127.0.0.1:8888/api/notification`
  json body

```json
{
  "comment_id": "61013c839633a80254ef2e38",
  "verb": "unread"
}
```

verbåªå¯ä»¥æ˜¯ `read` å’Œ `unread`
comment_id æ˜¯è¯„è®ºçš„id

# åˆ†ç±»

æœ€çµæ´»çš„APIï¼ æ¨èç»„åˆæ–¹å¼ï¼š å›½å®¶ã€åˆ†ç±»

* GET `/api/category`

å‚æ•° `douban=True` ä¼šè¿”å›è±†ç“£ä¿¡æ¯ï¼Œé»˜è®¤ä¸è¿”å› æ”¯æŒå¦‚ä¸‹å‚æ•°ï¼Œå‡ä¸ºå¯é€‰å‚æ•°ï¼Œå¯è‡ªç”±ç»„åˆï¼ŒURLå‚æ•°å¯ä»¥URLç¼–ç ï¼Œä¹Ÿå¯ä»¥ä¸ç¼–ç ï¼š

## åˆ†é¡µå‚æ•°

* page é»˜è®¤1
* size é»˜è®¤15

## channel

å¤§åˆ†ç±»ï¼Œç”µå½±ã€ç”µè§†å‰§ã€å…¬å¼€è¯¾ï¼Œè¯¦ç»†åˆ†ç±»å¯ä»¥ä½¿ç”¨ `channel_cn`

```python
[('movie', 12057), ('tv', 5428), ('openclass', 35), ('discuss', 1)]
```

## channel_cn

æ¨èå€¼ï¼š

```python
[('ç”µå½±', 12057), ('ç¾å‰§', 2119), ('æ—¥å‰§', 1215), ('è‹±å‰§', 641), ('çºªå½•ç‰‡', 314), ('éŸ©å‰§', 212), ('åŠ¨ç”»', 126),
 ('æ³°å‰§', 112),
 ('åŠ å‰§', 82), ('è¥¿å‰§', 62), ('æ¾³å‰§', 61)]

```

å…¨éƒ¨å¯é€‰å€¼ï¼š

```python
[('ç”µå½±', 12057), ('ç¾å‰§', 2119), ('æ—¥å‰§', 1215), ('è‹±å‰§', 641), ('çºªå½•ç‰‡', 314), ('éŸ©å‰§', 212), ('åŠ¨ç”»', 126),
 ('æ³°å‰§', 112),
 ('åŠ å‰§', 82), ('è¥¿å‰§', 62), ('æ¾³å‰§', 61), ('çœŸäººç§€', 51), ('æ³•å‰§', 50), ('å¾·å‰§', 41), ('å…¬å¼€è¯¾', 35), ('å…¶å‰§', 34),
 ('è¶Šå‰§', 23),
 ('å·´å‰§', 21), ('ä¿„å‰§', 21), ('æ„å‰§', 19), ('å¢¨å‰§', 16), ('å°å‰§', 16), ('åœŸå‰§', 16), ('\x00å‰§', 12), ('ç”µè§†ç”µå½±', 12),
 ('è„±å£ç§€', 10),
 ('æŒªå¨å‰§', 9), ('ä¸¹éº¦å‰§', 8), ('ç»¼è‰º', 7), ('è‘¡è„ç‰™å‰§', 6), ('é¢å¥–ç¤¼', 5), ('ä»¥è‰²åˆ—å‰§', 4), ('æ–°å‰§', 4),
 ('è²å¾‹å®¾å‰§', 4), ('åŠ¨æ¼«', 4), ('ç‘å…¸å‰§', 4),
 ('æ–°è¥¿å…°å‰§', 4), ('ç¥å‰§', 3), ('çŸ­è§†é¢‘', 3), ('èˆå°å‰§', 3), ('MV', 3), ('æ¼”è®²', 3), ('é¢å¥–å…¸ç¤¼', 3), ('æ¯”åˆ©æ—¶å‰§', 3),
 ('å—éå‰§', 3), ('ç”µè§†å‰§', 3),
 ('æ™¨é—´å‰§', 2), ('çŸ­ç‰‡', 2), ('è·å…°å‰§', 2), ('å·´è¥¿ç”µè§†å‰§', 2), ('çˆ±å°”å…°å‰§', 2), ('æ±½è½¦ä¸‰è´±å®¢', 2), ('èŠ¬å…°å‰§', 2),
 ('å¤§å‰§', 2), ('ç¾å‰§ å¾‹æ”¿', 1),
 ('ç¾å‰§/è‹±å‰§', 1), ('å°é•‡ç–‘äº‘(ç¾ç‰ˆ)', 1), ('åŠ¨ç”»ç‰‡', 1), ('åŸƒå‰§', 1), ('æ¢æ¡ˆ', 1), ('çºªå½•', 1), ('æ¼”å”±ä¼š', 1),
 ('å†°å²›å‰§', 1), ('æ·±å¤œå‰§', 1),
 ('èŒå‰§', 1), ('å¾‹æ”¿/å‰§æƒ…', 1), ('2013å¹´BBCå†å²è®°å½•ç‰‡', 1), ('å‚¬çœ å‰§', 1), ('æ³¢å…°å‰§', 1), ('å¹¼æ•™', 1), ('çº¦æ—¦', 1),
 ('é—¹å‰§', 1), ('æµªæ¼«/å–œå‰§', 1),
 ('æ‚¬ç–‘/ç½ªæ¡ˆ', 1), ('BBCä¸–ç•Œæ¯ä¸“é¢˜çºªå½•ç‰‡', 1), ('å…‹ç½—åœ°äºšå‰§', 1), ('å°å‰§', 1), ('å¢¨è¥¿å“¥å‰§', 1), ('æƒŠæ‚š', 1),
 ('é˜¿æ‹‰ä¼¯å‰§', 1), ('å§”å†…ç‘æ‹‰ç”µè§†å‰§', 1),
 ('éŸ³ä¹ä¼š', 1), ('å·´è¥¿å‰§', 1), ('æ–°é—»', 1), ('åœŸè€³å…¶å‰§', 1), ('çº¦æ—¦å‰§', 1), ('å‘å¸ƒä¼š', 1), ('ä¸¹éº¦ç‘å…¸åˆæ‹', 1),
 ('æ·å…‹å‰§', 1), ('è¶Šå—å‰§', 1),
 ('å‰§æƒ…', 1), ('å¢¨è¥¿å“¥ç”µè§†å‰§', 1), ('éŸ©ç»¼', 1), ('èŠ±çµ®', 1), ('', 1)]

```

## area

**æ¨èä½¿ç”¨**
æ¨èå€¼

```python
[('ç¾å›½', 9057), ('æ—¥æœ¬', 2233), ('è‹±å›½', 1637), ('æ³•å›½', 902), ('éŸ©å›½', 763), ('å…¶ä»–', 535), ('å¾·å›½', 402),
 ('åŠ æ‹¿å¤§', 313),
 ('è¥¿ç­ç‰™', 280), ('å°åº¦', 247), ('ä¿„ç½—æ–¯', 234), ('æ³°å›½', 191), ('æ¾³å¤§åˆ©äºš', 182), ('æ„å¤§åˆ©', 150), ('', 109),
 ('è¶Šå—', 60), ('å·´è¥¿', 54),
 ('å¤§é™†', 52), ('å¢¨è¥¿å“¥', 40), ('åœŸè€³å…¶', 35), ('æ–°åŠ å¡', 23), ('é¦™æ¸¯', 20), ('åŸƒåŠ', 1), ('å°æ¹¾', 1)]

```

## show_type

ä¸æ¨èä½¿ç”¨ï¼æ•°æ®ç¼ºå¤±éå¸¸ä¸¥é‡

```python
[('', 16751), ('çºªå½•ç‰‡', 314), ('åŠ¨ç”»', 126), ('æ—¥å‰§', 110), ('çœŸäººç§€', 51), ('ç”µè§†ç”µå½±', 12), ('è„±å£ç§€', 10),
 ('æŒªå¨å‰§', 9), ('ç¾å‰§', 8),
 ('ä¸¹éº¦å‰§', 8), ('ç»¼è‰º', 7), ('è‘¡è„ç‰™å‰§', 6), ('é¢å¥–ç¤¼', 5), ('ä»¥è‰²åˆ—å‰§', 4), ('è²å¾‹å®¾å‰§', 4), ('åŠ¨æ¼«', 4),
 ('ç‘å…¸å‰§', 4), ('æ–°è¥¿å…°å‰§', 4),
 ('ç¥å‰§', 3), ('è‹±å‰§', 3), ('çŸ­è§†é¢‘', 3), ('èˆå°å‰§', 3), ('MV', 3), ('æ¼”è®²', 3), ('é¢å¥–å…¸ç¤¼', 3), ('æ¯”åˆ©æ—¶å‰§', 3),
 ('å—éå‰§', 3), ('æ™¨é—´å‰§', 2),
 ('çŸ­ç‰‡', 2), ('è·å…°å‰§', 2), ('æ–°å‰§', 2), ('å·´è¥¿ç”µè§†å‰§', 2), ('çˆ±å°”å…°å‰§', 2), ('æ±½è½¦ä¸‰è´±å®¢', 2), ('èŠ¬å…°å‰§', 2),
 ('æ³°å‰§', 1), ('ç¾å‰§ å¾‹æ”¿', 1),
 ('ç¾å‰§/è‹±å‰§', 1), ('å°é•‡ç–‘äº‘(ç¾ç‰ˆ)', 1), ('åŠ¨ç”»ç‰‡', 1), ('æ¢æ¡ˆ', 1), ('çºªå½•', 1), ('æ¼”å”±ä¼š', 1), ('å†°å²›å‰§', 1),
 ('æ·±å¤œå‰§', 1), ('èŒå‰§', 1),
 ('å¾‹æ”¿/å‰§æƒ…', 1), ('2013å¹´BBCå†å²è®°å½•ç‰‡', 1), ('å‚¬çœ å‰§', 1), ('æ³¢å…°å‰§', 1), ('å¹¼æ•™', 1), ('çº¦æ—¦', 1), ('é—¹å‰§', 1),
 ('æµªæ¼«/å–œå‰§', 1), ('éŸ©å‰§', 1),
 ('æ‚¬ç–‘/ç½ªæ¡ˆ', 1), ('è¥¿å‰§', 1), ('BBCä¸–ç•Œæ¯ä¸“é¢˜çºªå½•ç‰‡', 1), ('å…‹ç½—åœ°äºšå‰§', 1), ('å¢¨è¥¿å“¥å‰§', 1), ('æƒŠæ‚š', 1),
 ('é˜¿æ‹‰ä¼¯å‰§', 1), ('å§”å†…ç‘æ‹‰ç”µè§†å‰§', 1),
 ('éŸ³ä¹ä¼š', 1), ('å·´è¥¿å‰§', 1), ('æ–°é—»', 1), ('åœŸè€³å…¶å‰§', 1), ('çº¦æ—¦å‰§', 1), ('å‘å¸ƒä¼š', 1), ('ä¸¹éº¦ç‘å…¸åˆæ‹', 1),
 ('æ·å…‹å‰§', 1), ('è¶Šå—å‰§', 1),
 ('å‰§æƒ…', 1), ('å¢¨è¥¿å“¥ç”µè§†å‰§', 1), ('éŸ©ç»¼', 1), ('èŠ±çµ®', 1)]

```

## è¯·æ±‚èŒƒä¾‹

å…¨éƒ¨ä½¿ç”¨ `size=1&douban=True`åšä¸ºèŒƒä¾‹ï¼Œå“åº”ç»“æ„å¦‚ä¸‹

æ³¨æ„ï¼Œç”±äºå¹¶ä¸æ˜¯æ‰€æœ‰çš„èµ„æºéƒ½æœ‰è±†ç“£ä¿¡æ¯ï¼Œå› æ­¤æœ‰äº›å¯èƒ½doubanå­—æ®µä¸º `{}`

```json
{
  "data": [
    {
      "id": 30552,
      "cnname": "æé™æˆ˜é˜Ÿ",
      "enname": "Ultraforce",
      "aliasname": "æç«¯åŠ›é‡",
      "channel": "tv",
      "channel_cn": "ç¾å‰§",
      "area": "ç¾å›½",
      "show_type": "",
      "expire": "1610397126",
      "views": 0,
      "year": [
        2013
      ],
      "douban": {
        "name": "æé™æˆ˜é˜Ÿ",
        "doubanId": 1295384,
        "doubanLink": "https://movie.douban.com/subject/1295384/",
        "posterLink": "https://img9.doubanio.com/view/photo/s_ratio_poster/public/p2512733819.jpg",
        "posterData": "base64ç¼–ç çš„å›¾ç‰‡",
        "resourceId": 30552,
        "rating": "7.9",
        "actors": [
          "å¡æ–¯å¸•Â·èŒƒÂ·è¿ªæ©",
          "è¿ªå¨œÂ·è¿ˆè€¶",
          "ä¸¹å¦®ä¸Â·ç†æŸ¥å…¹",
          "æ°å…‹Â·å¸ƒå¡",
          "å°¼å°”Â·å¸•ç‰¹é‡Œå…‹Â·å“ˆé‡Œæ–¯",
          "å…‹å…°è¥¿Â·å¸ƒæœ—",
          "å¡æ–¯Â·å‰åˆ—å§†",
          "å¸•ç‰¹é‡Œå…‹Â·èŒ‚é¡¿",
          "è¿ˆå…‹å°”Â·è‰¾æ©å¡å¾·",
          "éœ²Â·éº¦å…‹æ‹‰çº³ç½•",
          "é©¬ç»å°”Â·è´å°”",
          "åŸƒé‡Œå…‹Â·å¸ƒé²æ–¯ç§‘ç‰¹å°”",
          "é©¬ç‰¹Â·è±æ–‡",
          "å¸ƒè•¾å…‹Â·æ—æ–¯åˆ©",
          "å®‰ä¸œå°¼Â·ç‘ç»´ç“¦",
          "å¸ƒå…°è¾¾Â·æ–¯ç‰¹æœ—",
          "è¿ªæ©Â·è¯ºé‡Œæ–¯",
          "å…‹é‡Œæ–¯æ‰˜å¼—Â·æŸ¯é‡Œ",
          "è±è¯ºå°”Â·å¡æ–¯å¤šå¤«",
          "ç½—ä¼¯ç‰¹Â·æ–¯è«ç‰¹",
          "æ–¯è’‚èŠ¬Â·ç¦ç‰¹",
          "ç½—ä¼¯ç‰¹Â·å¤§å«Â·è±ªå°”",
          "è‰¾ç±³Â·æ–¯é©¬ç‰¹",
          "è’‚è«è¥¿Â·å¥¥é—¨å¾·æ£®",
          "ä»£å°”Â·æˆ´"
        ],
        "directors": [
          "ä¿ç½—Â·èŒƒéœæ–‡"
        ],
        "genre": [
          "åŠ¨ä½œ",
          "ç§‘å¹»",
          "æƒŠæ‚š",
          "å†’é™©"
        ],
        "releaseDate": "1997-11-07",
        "episodeCount": "",
        "episodeDuration": "129 åˆ†é’Ÿ",
        "writers": [
          "çˆ±å¾·åÂ·è¯ºéº¦å°”",
          "ç½—ä¼¯ç‰¹Â·AÂ·æµ·å› è±å› "
        ],
        "year": "1997",
        "introduction": "é«˜ä¸­ç”Ÿç‘ç§‘ï¼ˆå¡æ–¯å¸•â€¢å‡¡â€¢è¿ªæ©CasperVanDiené¥°ï¼‰æ¯•ä¸šåï¼Œåœ¨å¥³å‹å¡é—¨ï¼ˆä¸¹å¦®ä¸â€¢ç†æŸ¥å…¹DeniseRichardsé¥°ï¼‰çš„é¼“åŠ¨ä¸‹ï¼Œè¿èƒŒäº†çˆ¶äº²çš„æ„å¿—ï¼ŒåŠ å…¥äº†æœºæ¢°åŒ–æ­¥å…µå­¦é™¢ï¼Œå¡é—¨äº¦åŠ å…¥äº†æµ·å†›å­¦é™¢ã€‚åœ¨ä»–ä»¬å‚åŠ è®­ç»ƒä¸ä¹…åï¼Œåœ°çƒé­åˆ°äº†æ¥è‡ªå¤–æ˜Ÿçƒçš„æ˜†è™«è¢­å‡»ã€‚ç‘ç§‘çš„äº²äººå‡æƒ¨é­æ€å®³ï¼Œå¡é—¨å°†æ‹æ‘„åˆ°çš„å½±åƒä¼ é€ç»™äº†ç‘ç§‘ã€‚æ‚²æ„¤äº¤åŠ çš„ç‘ç§‘ç‡é¢†éƒ¨ä¸‹æŠ•å…¥åˆ°äº†å¯¹æŠ—å¤–æ˜Ÿæ˜†è™«çš„æˆ˜æ–—ä¸­ã€‚ç„¶è€Œï¼Œå†›é˜Ÿä½ä¼°äº†è¿™äº›æ˜†è™«çš„å®åŠ›ã€‚åœ¨ä¸€æ¬¡é­é‡æˆ˜ä¸­ï¼Œ10ä¸‡å†›é˜Ÿæƒ¨é­æ€æˆ®ï¼Œåªå‰©ç‘ç§‘ã€å¡é—¨ç­‰å‡ äººä¾¥å¹¸é€ƒç”Ÿã€‚ç‘ç§‘äº²çœ¼ç›®ç¹äº†ææ€–çš„æ€æˆ®åœºé¢ï¼Œæ„å¤–è·çŸ¥äº†è¿™äº›æ˜†è™«å˜å¾—å¦‚æ­¤èªæ˜ã€å¼ºå¤§çš„ç§˜å¯†ã€‚ç‘ç§‘æ„è¯†åˆ°å¿…é¡»åˆ¶é€ æ›´å…ˆè¿›çš„æ­¦å™¨æ‰èƒ½å¯¹ä»˜è¿™äº›æ˜†è™«ï¼Œäººç±»çš„åå‡»å¼€å§‹äº†ï¼"
      }
    }
  ],
  "count": 9057
}
```

* æ—¥å‰§ `http://127.0.0.1:8888/api/category?channel_cn=æ—¥å‰§`
* å›½å®¶ä¸º"ç¾å›½"çš„èµ„æº `http://127.0.0.1:8888/api/category?area=ç¾å›½`
* ç¾å›½çš„çºªå½•ç‰‡ `http://127.0.0.1:8888/api/category?&area=ç¾å›½&channel_cn=çºªå½•ç‰‡`
* æ—¥æœ¬çš„ç”µå½± `http://127.0.0.1:8888/api/category?size=1&area=æ—¥æœ¬&channel=movie` æˆ– `channel_cn=ç”µå½±`
* åŠ¨æ¼« `http://127.0.0.1:8888/api/category?size=1&channel_cn=åŠ¨æ¼«`

# æœ€æ–°èµ„æº

* GET `/api/resource/latest`

å¯é€‰URLå‚æ•° sizeï¼Œæœ€å¤§100ï¼Œè¶…è¿‡100æ— æ•ˆã€‚å¦‚ `http://127.0.0.1:8888/api/resource/latest?size=5` å³ä¸ºè·å–æœ€æ–°5æ¡æ•°æ®

```json
{
  "data": [
    {
      "name": "é€Ÿåº¦ä¸æ¿€æƒ…9-F9 (2021) (1080p) [BluRay] [HD FULL].avi 1.52 GB",
      "timestamp": "1623415867",
      "size": "1.52GB",
      "resource_id": 39894,
      "res_name": "é€Ÿåº¦ä¸æ¿€æƒ…9",
      "date": "2021-06-11 20:51:07"
    },
    {
      "name": "æ´›åŸº-E01",
      "timestamp": "1623415867",
      "size": "788.53MB",
      "resource_id": 41382,
      "res_name": "æ´›åŸº",
      "date": "2021-06-11 20:51:07"
    },
    {
      "name": "è‡´å‘½å¥³äºº-EP01",
      "timestamp": "1623415867",
      "size": "790MB",
      "resource_id": 38413,
      "res_name": "è‡´å‘½å¥³äºº",
      "date": "2021-06-11 20:51:07"
    }
  ]
}
```
